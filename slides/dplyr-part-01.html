<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data Manipulation with R</title>
    <meta charset="utf-8" />
    <meta name="author" content="Martin Frigaard" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <meta name="description" content="Data Manipulation with R"/>
    <meta name="generator" content="xaringan and remark.js"/>
    <meta name="github-repo" content="mjfrigaard/CSUC-JOUR301-FA22"/>
    <meta name="twitter:title" content="Data Manipulation with R"/>
    <meta name="twitter:description" content="Data Manipulation with R"/>
    <meta name="twitter:url" content="https://mjfrigaard.github.io/CSUC-JOUR301-FA22/"/>
    <meta name="twitter:card" content="summary"/>
    <meta name="twitter:creator" content="@mjfrigaard"/>
    <meta name="twitter:site" content="@mjfrigaard"/>
    <meta property="og:title" content="Data Manipulation with R"/>
    <meta property="og:description" content="Data Manipulation with R"/>
    <meta property="og:url" content="https://mjfrigaard.github.io/CSUC-JOUR301-FA22/"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Martin Frigaard"/>
    <link href="libs/tile-view/tile-view.css" rel="stylesheet" />
    <script src="libs/tile-view/tile-view.js"></script>
    <link href="libs/panelset/panelset.css" rel="stylesheet" />
    <script src="libs/panelset/panelset.js"></script>
    <script src="libs/clipboard/clipboard.min.js"></script>
    <link href="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"Copy Code","success":"Copied!","error":"Press Ctrl+C to Copy"})</script>
    <link href="libs/shareon/shareon.min.css" rel="stylesheet" />
    <script src="libs/shareon/shareon.min.js"></script>
    <link href="libs/xaringanExtra-shareagain/shareagain.css" rel="stylesheet" />
    <script src="libs/xaringanExtra-shareagain/shareagain.js"></script>
    <link href="libs/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/lexis.css" type="text/css" />
    <link rel="stylesheet" href="css/lexis-fonts.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">








layout: true

&lt;!-- this adds the link footer to all slides, depends on footer-small class in css--&gt;

&lt;div class="footer-small"&gt;&lt;span&gt;https://mjfrigaard.github.io/CSUC-JOUR301-FA22/&lt;/div&gt;

---
name: title-slide
class: title-slide, center, middle, inverse

# Data Manipulation with R
#.fancy[An introduction to the `dplyr` package]

&lt;br&gt;

.large[by Martin Frigaard]

Written: September 21 2021

Updated: October 10 2022

.footer-large[.right[.fira[
&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;[Created using the "λέξις" theme](https://jhelvy.github.io/lexis/index.html#what-does-%CE%BB%CE%AD%CE%BE%CE%B9%CF%82-mean)
]]]

---

class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 10%
background-size: 6%

# Objectives 

## 1) the pipes `%&gt;%` and `|&gt;`

## 2) Common data manipulation tasks

## 3) `dplyr`'s verbs 

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 10%
background-size: 6%

# Materials 

### Follow along with the exercises:

View the exercises on the [course website.](https://mjfrigaard.github.io/FA22-JOUR301/exercises/intro-to-dplyr.html) 

Or create a project for *notes*: 


```r
remotes::install_github("mjfrigaard/goodenuffR")
library(goodenuffR)
goodenuffR::goodenuff_project(
  project_name = "dplyr-notes",
  folder_path = "path/to/course/notes/folder"
)
# after new project opens
goodenuffR::goodenuff_files()
# open README and get started
```


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 10%
background-size: 6%

# What are common data manipulation tasks?

.leftcol[

### 1. Viewing the dataset

### 2. Choosing columns/rows 

### 3. Ordering rows

]

--

.rightcol[

### 4. Changing existing columns  

### 5. Creating or calculating new columns 

]

---
class: inverse, center, bottom
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 35%

# `dplyr` = a grammar for data manipulation

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 10%
background-size: 6%

# `dplyr` = "dee + ply + ARRRR"

.leftcol[

#### *Pliers* are tools for grasping or manipulating common objects 
.border[

&lt;img src="img/pliers.png" width="55%" height="55%" style="display: block; margin: auto;" /&gt;

]

]

--

.rightcol[


#### The `dplyr` package has a variety of verbs for performing common data manipulations

]



---
class: left, top
background-image: url(img/dplyr.png)
background-position: 90% 10%
background-size: 6%

# The `big_starwars` dataset  

### These data come from the Star Wars API: 

&lt;img src="img/star-wars.jpeg" width="40%" height="40%" style="display: block; margin: auto;" /&gt;

--

`big_starwars` is similar to the `starwars` data in the `dplyr` package:

https://dplyr.tidyverse.org/reference/starwars.html


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# Import `big_starwars` 

--

#### Import the data using the url and `readr`


```r
library(readr)
big_starwars &lt;- read_csv("https://bit.ly/big-sw")
```

--

#### This loads the dataset into our ***Environment*** pane

.border[

&lt;img src="img/starwars-env.png" width="90%" height="90%" style="display: block; margin: auto;" /&gt;

]

---
class: inverse, center, middle
background-image: url(img/pipe.png)
background-position: 50% 15%
background-size: 20%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Writing code with pipes 

##  .orange[|&gt;] and .blue[%&gt;%]

---
class: left, top
background-image: url(img/pipe.png)
background-position: 93% 10%
background-size: 6%

# Background on pipes

***.purple[What is a 'pipe'?]***

--

&gt; A pipe is an operator for making code "*easier to read or to express*" and "*'sweeter' for human use*" (which is why it's also known as ['*syntactic sugar*')](https://en.wikipedia.org/wiki/Syntactic_sugar)

&gt; The original pipe in R (.blue[%&gt;%]) comes from [the `magrittr` package](https://magrittr.tidyverse.org/), R released a 'native' pipe ( .orange[|&gt;] ) as of version 4.1

--

***.purple[What do pipes do?]***

--

&gt; Pipes combine ["*a set of processes chained together ... so that the output text of each process ... is passed directly as input to the next one*"](https://en.wikipedia.org/wiki/Pipeline_(Unix)

---
class: left, top
background-image: url(img/pipe.png)
background-position: 93% 10%
background-size: 6%

# Background on pipes

***.purple[How can I use them?]***

--

&gt; Create pipes easily with keyboard shortcuts

--

.leftcol[.center[


### ***Mac***

### `Cmd` + `Shift` + `M` = .blue[%&gt;%] or .orange[|&gt;]

]]


--

.rightcol[.center[

### ***Windows***

### `Crtl` + `Shift` + `M` = .blue[%&gt;%] or .orange[|&gt;]

]]

---
class: left, top
background-image: url(img/pipe.png)
background-position: 93% 10%
background-size: 6%

# Pipe settings 

.leftcol40[

&lt;br&gt;&lt;br&gt;

Set which pipe to use in **Tools** &gt; **Global Options** &gt; **Code**

]

--

.rightcol60[

.border[

&lt;img src="img/use-native-pipe.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;

]

]


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 10%
background-size: 6%

# How pipes work 



***Without the pipe, we have to constantly assign the output to new object:***

&lt;img src="img/pipe-00.png" width="70%" height="70%" style="display: block; margin: auto;" /&gt;


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 10%
background-size: 6%

# How pipes work 

**Or use nested functions:**

&lt;img src="img/pipe-01.png" width="95%" height="95%" style="display: block; margin: auto;" /&gt;



---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 10%
background-size: 6%

# How pipes work

**Pipes allow us to pass inputs/outputs from functions left-to-right**

--

.leftcol60[

&lt;img src="img/pipe-03.png" width="100%" height="100%" style="display: block; margin: auto;" /&gt;

]

--

.rightcol40[

&lt;br&gt;&lt;br&gt;

.center[

***.green[|&gt;] or .green[%&gt;%] can be read as .green["then"]***

]

]

---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 15%
background-size: 20%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# `dplyr` 

### *See the exercises for more examples!*


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 90% 10%
background-size: 6%

# `dplyr` verbs

### The primary verbs for data manipulation in `dplyr`:

--

#### `glimpse()`

--

#### `select()` 

--

#### `filter()`  

--

#### `arrange()` 

--

#### `mutate()`


---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 25%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Viewing .red[all] the data 

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# View in the .blue[Console]

If you view the dataset in the Console, you'll see a plain-text `tibble`


```r
big_starwars
```

--

.code50[


```
  # A tibble: 82 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sky…    172    77 blond   fair    blue       19   mascu… Tatooi… Human  
   2 C-3PO        167    75 &lt;NA&gt;    gold    yellow    112   mascu… Tatooi… Droid  
   3 R2-D2         96    32 &lt;NA&gt;    white,… red        33   mascu… Naboo   Droid  
   4 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
   5 Leia Org…    150    49 brown   light   brown      19   femin… Aldera… Human  
   6 Owen Lars    178   120 brown,… light   blue       52   mascu… Tatooi… Human  
   7 Beru Whi…    165    75 brown   light   blue       47   femin… Tatooi… Human  
   8 R5-D4         97    32 &lt;NA&gt;    white,… red        NA   mascu… Tatooi… Droid  
   9 Biggs Da…    183    84 black   light   brown      24   mascu… Tatooi… Human  
  10 Obi-Wan …    182    77 auburn… fair    blue-g…    57   mascu… Stewjon Human  
  # … with 72 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# View in .blue[R Markdown]

If you're using R Markdown, you'll see a `paged_table()`

--

&lt;img src="img/rmd-paged-table.gif" width="75%" height="75%" style="display: block; margin: auto;" /&gt;



---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# View in .blue[Data Viewer]

CLick on the `big_starwars` dataset to use RStudio's data viewer

--

&lt;img src="img/starwars-dataviewer.png" width="52%" height="52%" style="display: block; margin: auto;" /&gt;

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# View in .blue[Data Viewer]

Or use the `View()` to use RStudio's data viewer

.leftcol30[


```r
big_starwars |&gt; View()
```

]

--

.rightcol70[

&lt;img src="img/View.png" width="90%" height="90%" style="display: block; margin: auto;" /&gt;


]




---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 7%

# View with `glimpse()`

### `glimpse()` transposes the data and prints as much of it to the screen as possible

--

.leftcol30[
.code50[


```r
big_starwars |&gt; glimpse()
```

]
]

--

.rightcol70[
.code50[


```
  Rows: 82
  Columns: 18
  $ name          &lt;chr&gt; "Luke Skywalker", "C-3PO", "R2-D2", "Darth Vader", "Leia…
  $ height        &lt;dbl&gt; 172, 167, 96, 202, 150, 178, 165, 97, 183, 182, 188, 180…
  $ mass          &lt;dbl&gt; 77.0, 75.0, 32.0, 136.0, 49.0, 120.0, 75.0, 32.0, 84.0, …
  $ hair_color    &lt;chr&gt; "blond", NA, NA, "none", "brown", "brown, grey", "brown"…
  $ skin_color    &lt;chr&gt; "fair", "gold", "white, blue", "white", "light", "light"…
  $ eye_color     &lt;chr&gt; "blue", "yellow", "red", "yellow", "brown", "blue", "blu…
  $ birth_year    &lt;dbl&gt; 19.0, 112.0, 33.0, 41.9, 19.0, 52.0, 47.0, NA, 24.0, 57.…
  $ gender        &lt;chr&gt; "masculine", "masculine", "masculine", "masculine", "fem…
  $ homeworld     &lt;chr&gt; "Tatooine", "Tatooine", "Naboo", "Tatooine", "Alderaan",…
  $ species       &lt;chr&gt; "Human", "Droid", "Droid", "Human", "Human", "Human", "H…
  $ sex           &lt;chr&gt; "male", "none", "none", "male", "female", "male", "femal…
  $ species_class &lt;chr&gt; "mammal", "artificial", "artificial", "mammal", "mammal"…
  $ species_desig &lt;chr&gt; "sentient", "sentient", "sentient", "sentient", "sentien…
  $ vehicle       &lt;chr&gt; "X-wing, Imperial shuttle, Snowspeeder, Imperial Speeder…
  $ hw_climate    &lt;chr&gt; "arid", "arid", "temperate", "arid", "temperate", "arid"…
  $ hw_gravity    &lt;chr&gt; "1 standard", "1 standard", "1 standard", "1 standard", …
  $ hw_terrain    &lt;chr&gt; "desert", "desert", "grassy hills, swamps, forests, moun…
  $ hw_pop        &lt;dbl&gt; 2.0e+05, 2.0e+05, 4.5e+09, 2.0e+05, 2.0e+09, 2.0e+05, 2.…
```

]


]


---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 25%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# **Selecting** columns = `select()`

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 15%
background-size: 6%

## **Select** columns with `select()`

#### `select()` allows us to pick specific columns out of a dataset

.code60[


```r
big_starwars |&gt; select(name, homeworld, species)
```

]

--

.code60[


```
  # A tibble: 82 × 3
     name               homeworld species
     &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;  
   1 Luke Skywalker     Tatooine  Human  
   2 C-3PO              Tatooine  Droid  
   3 R2-D2              Naboo     Droid  
   4 Darth Vader        Tatooine  Human  
   5 Leia Organa        Alderaan  Human  
   6 Owen Lars          Tatooine  Human  
   7 Beru Whitesun lars Tatooine  Human  
   8 R5-D4              Tatooine  Droid  
   9 Biggs Darklighter  Tatooine  Human  
  10 Obi-Wan Kenobi     Stewjon   Human  
  # … with 72 more rows
```

]



---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 15%
background-size: 6%

## **Select** columns with `select()`

#### We can use negation (`-`) to remove columns

.code60[


```r
big_starwars |&gt; select(-c(mass, height, hair_color))
```

]

--

.code60[


```
  # A tibble: 82 × 15
     name     skin_…¹ eye_c…² birth…³ gender homew…⁴ species sex   speci…⁵ speci…⁶
     &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sk… fair    blue       19   mascu… Tatooi… Human   male  mammal  sentie…
   2 C-3PO    gold    yellow    112   mascu… Tatooi… Droid   none  artifi… sentie…
   3 R2-D2    white,… red        33   mascu… Naboo   Droid   none  artifi… sentie…
   4 Darth V… white   yellow     41.9 mascu… Tatooi… Human   male  mammal  sentie…
   5 Leia Or… light   brown      19   femin… Aldera… Human   fema… mammal  sentie…
   6 Owen La… light   blue       52   mascu… Tatooi… Human   male  mammal  sentie…
   7 Beru Wh… light   blue       47   femin… Tatooi… Human   fema… mammal  sentie…
   8 R5-D4    white,… red        NA   mascu… Tatooi… Droid   none  artifi… sentie…
   9 Biggs D… light   brown      24   mascu… Tatooi… Human   male  mammal  sentie…
  10 Obi-Wan… fair    blue-g…    57   mascu… Stewjon Human   male  mammal  sentie…
  # … with 72 more rows, 5 more variables: vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;,
  #   hw_gravity &lt;chr&gt;, hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable
  #   names ¹​skin_color, ²​eye_color, ³​birth_year, ⁴​homeworld, ⁵​species_class,
  #   ⁶​species_desig
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 9%
background-size: 6%

# `select()` helpers

#### `select()` comes with 'helpers' to make chosing columns easier (and reduces typing!)

.small[

Helper                | Outputs
:-------------------  | :--------------------------------------
`starts_with()`       | choose columns starting with...
`ends_with()`         | choose columns ending with...
`contains`            | choose columns with names containing...
`matches()`           | choose columns matching regex...
`one_of()`            | choose columns from a set of names...
`num_range()`         | choose columns from a numerical index...
`where()`             | choose columns where the function returns `TRUE`

]




---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 15%
background-size: 6%

## **Select** columns with `select()` 

### Select columns using `starts_with()` 

.code60[


```r
big_starwars |&gt; select(name, starts_with("h"))
```

]

--

.code60[


```
  # A tibble: 82 × 8
     name               height hair_color   homew…¹ hw_cl…² hw_gr…³ hw_te…⁴ hw_pop
     &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;
   1 Luke Skywalker        172 blond        Tatooi… arid    1 stan… desert   2  e5
   2 C-3PO                 167 &lt;NA&gt;         Tatooi… arid    1 stan… desert   2  e5
   3 R2-D2                  96 &lt;NA&gt;         Naboo   temper… 1 stan… grassy…  4.5e9
   4 Darth Vader           202 none         Tatooi… arid    1 stan… desert   2  e5
   5 Leia Organa           150 brown        Aldera… temper… 1 stan… grassl…  2  e9
   6 Owen Lars             178 brown, grey  Tatooi… arid    1 stan… desert   2  e5
   7 Beru Whitesun lars    165 brown        Tatooi… arid    1 stan… desert   2  e5
   8 R5-D4                  97 &lt;NA&gt;         Tatooi… arid    1 stan… desert   2  e5
   9 Biggs Darklighter     183 black        Tatooi… arid    1 stan… desert   2  e5
  10 Obi-Wan Kenobi        182 auburn, whi… Stewjon temper… 1 stan… grass   NA    
  # … with 72 more rows, and abbreviated variable names ¹​homeworld, ²​hw_climate,
  #   ³​hw_gravity, ⁴​hw_terrain
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 15%
background-size: 6%

## **Select** columns with `select()` 

### Select columns using `matches()` 

.code60[


```r
big_starwars |&gt; select(name, matches("_"))
```

]

--

.code60[


```
  # A tibble: 82 × 11
     name  hair_…¹ skin_…² eye_c…³ birth…⁴ speci…⁵ speci…⁶ hw_cl…⁷ hw_gr…⁸ hw_te…⁹
     &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
   1 Luke… blond   fair    blue       19   mammal  sentie… arid    1 stan… desert 
   2 C-3PO &lt;NA&gt;    gold    yellow    112   artifi… sentie… arid    1 stan… desert 
   3 R2-D2 &lt;NA&gt;    white,… red        33   artifi… sentie… temper… 1 stan… grassy…
   4 Dart… none    white   yellow     41.9 mammal  sentie… arid    1 stan… desert 
   5 Leia… brown   light   brown      19   mammal  sentie… temper… 1 stan… grassl…
   6 Owen… brown,… light   blue       52   mammal  sentie… arid    1 stan… desert 
   7 Beru… brown   light   blue       47   mammal  sentie… arid    1 stan… desert 
   8 R5-D4 &lt;NA&gt;    white,… red        NA   artifi… sentie… arid    1 stan… desert 
   9 Bigg… black   light   brown      24   mammal  sentie… arid    1 stan… desert 
  10 Obi-… auburn… fair    blue-g…    57   mammal  sentie… temper… 1 stan… grass  
  # … with 72 more rows, 1 more variable: hw_pop &lt;dbl&gt;, and abbreviated variable
  #   names ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​species_class,
  #   ⁶​species_desig, ⁷​hw_climate, ⁸​hw_gravity, ⁹​hw_terrain
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 15%
background-size: 6%

## **Select** columns with `select()` 

### Select columns using `where()` 

.code60[


```r
big_starwars |&gt; select(name, where(is.character))
```

]

--

.code60[


```
  # A tibble: 82 × 14
     name     hair_…¹ skin_…² eye_c…³ gender homew…⁴ species sex   speci…⁵ speci…⁶
     &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sk… blond   fair    blue    mascu… Tatooi… Human   male  mammal  sentie…
   2 C-3PO    &lt;NA&gt;    gold    yellow  mascu… Tatooi… Droid   none  artifi… sentie…
   3 R2-D2    &lt;NA&gt;    white,… red     mascu… Naboo   Droid   none  artifi… sentie…
   4 Darth V… none    white   yellow  mascu… Tatooi… Human   male  mammal  sentie…
   5 Leia Or… brown   light   brown   femin… Aldera… Human   fema… mammal  sentie…
   6 Owen La… brown,… light   blue    mascu… Tatooi… Human   male  mammal  sentie…
   7 Beru Wh… brown   light   blue    femin… Tatooi… Human   fema… mammal  sentie…
   8 R5-D4    &lt;NA&gt;    white,… red     mascu… Tatooi… Droid   none  artifi… sentie…
   9 Biggs D… black   light   brown   mascu… Tatooi… Human   male  mammal  sentie…
  10 Obi-Wan… auburn… fair    blue-g… mascu… Stewjon Human   male  mammal  sentie…
  # … with 72 more rows, 4 more variables: vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;,
  #   hw_gravity &lt;chr&gt;, hw_terrain &lt;chr&gt;, and abbreviated variable names
  #   ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​homeworld, ⁵​species_class,
  #   ⁶​species_desig
```

]


---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 25%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Choosing rows with `filter()`

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 7%

# Choose rows with `filter()` 

### `filter()` lets us pull out rows based on logical conditions

.code60[


```r
big_starwars |&gt; filter(species == "Human")
```

]

--

.code60[


```
  # A tibble: 35 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sky…    172    77 blond   fair    blue       19   mascu… Tatooi… Human  
   2 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
   3 Leia Org…    150    49 brown   light   brown      19   femin… Aldera… Human  
   4 Owen Lars    178   120 brown,… light   blue       52   mascu… Tatooi… Human  
   5 Beru Whi…    165    75 brown   light   blue       47   femin… Tatooi… Human  
   6 Biggs Da…    183    84 black   light   brown      24   mascu… Tatooi… Human  
   7 Obi-Wan …    182    77 auburn… fair    blue-g…    57   mascu… Stewjon Human  
   8 Anakin S…    188    84 blond   fair    blue       41.9 mascu… Tatooi… Human  
   9 Wilhuff …    180    NA auburn… fair    blue       64   mascu… Eriadu  Human  
  10 Han Solo     180    80 brown   fair    brown      29   mascu… Corell… Human  
  # … with 25 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]

---
class: left top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Choose rows with `filter()` 

#### `filter()` logical conditions include: 

.small[

Logical Test        | Outputs
:--------------:    | :--------------------------:
`&lt;`                 | Less than
`&gt;`                 | Greater than
`==`                | Equal to
`&lt;=`                | Less than or equal to
`&gt;=`                | Greater than or equal to
`!=`                | Not equal to
`%in%`              | Group membership
`is.na()`           | is NA (missing)
`!is.na()`          | is not NA (non-missing)

]




---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Choose rows with `filter()` 

### Combine logical condtions with `&amp;` or `,` 

.code60[


```r
# this gets the same results...
big_starwars |&gt; filter(species == "Human" &amp; !is.na(hair_color))
```

]

--

.code60[


```
  # A tibble: 35 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sky…    172    77 blond   fair    blue       19   mascu… Tatooi… Human  
   2 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
   3 Leia Org…    150    49 brown   light   brown      19   femin… Aldera… Human  
   4 Owen Lars    178   120 brown,… light   blue       52   mascu… Tatooi… Human  
   5 Beru Whi…    165    75 brown   light   blue       47   femin… Tatooi… Human  
   6 Biggs Da…    183    84 black   light   brown      24   mascu… Tatooi… Human  
   7 Obi-Wan …    182    77 auburn… fair    blue-g…    57   mascu… Stewjon Human  
   8 Anakin S…    188    84 blond   fair    blue       41.9 mascu… Tatooi… Human  
   9 Wilhuff …    180    NA auburn… fair    blue       64   mascu… Eriadu  Human  
  10 Han Solo     180    80 brown   fair    brown      29   mascu… Corell… Human  
  # … with 25 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Choose rows with `filter()` 

### Combine logical condtions with `&amp;` or `,` 

.code60[


```r
# ...as this
big_starwars |&gt; filter(species == "Human", !is.na(hair_color))
```

]

--

.code60[


```
  # A tibble: 35 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sky…    172    77 blond   fair    blue       19   mascu… Tatooi… Human  
   2 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
   3 Leia Org…    150    49 brown   light   brown      19   femin… Aldera… Human  
   4 Owen Lars    178   120 brown,… light   blue       52   mascu… Tatooi… Human  
   5 Beru Whi…    165    75 brown   light   blue       47   femin… Tatooi… Human  
   6 Biggs Da…    183    84 black   light   brown      24   mascu… Tatooi… Human  
   7 Obi-Wan …    182    77 auburn… fair    blue-g…    57   mascu… Stewjon Human  
   8 Anakin S…    188    84 blond   fair    blue       41.9 mascu… Tatooi… Human  
   9 Wilhuff …    180    NA auburn… fair    blue       64   mascu… Eriadu  Human  
  10 Han Solo     180    80 brown   fair    brown      29   mascu… Corell… Human  
  # … with 25 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Choose rows with `filter()` 

Remember that **.red[any logical condition works]** with `filter()`, so we can borrow functions from other packages to help us (like `stringr::str_detect()`)]

--

.code60[


```r
big_starwars |&gt; filter( # look for names containing a number
  str_detect(string = name, pattern = "[:digit:]")
)
```

]

--

.code60[


```
  # A tibble: 5 × 18
    name   height  mass hair_color skin_c…¹ eye_c…² birth…³ gender homew…⁴ species
    &lt;chr&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
  1 C-3PO     167    75 &lt;NA&gt;       gold     yellow      112 mascu… Tatooi… Droid  
  2 R2-D2      96    32 &lt;NA&gt;       white, … red          33 mascu… Naboo   Droid  
  3 R5-D4      97    32 &lt;NA&gt;       white, … red          NA mascu… Tatooi… Droid  
  4 IG-88     200   140 none       metal    red          15 mascu… &lt;NA&gt;    Droid  
  5 R4-P17     96    NA none       silver,… red, b…      NA femin… &lt;NA&gt;    Droid  
  # … with 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;, species_desig &lt;chr&gt;,
  #   vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;, hw_terrain &lt;chr&gt;,
  #   hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​skin_color, ²​eye_color,
  #   ³​birth_year, ⁴​homeworld
```

]

---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 25%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Sorting rows with `arrange()`


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Sort rows with `arrange()`

### `arrange()` sorts the contents of a dataset (ascending or descending)

.code60[


```r
big_starwars |&gt; arrange(height)
```

]

--

.code60[


```
  # A tibble: 82 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Yoda          66    17 white   green   brown       896 mascu… &lt;NA&gt;    Yoda's…
   2 Ratts Ty…     79    15 none    grey, … &lt;NA&gt;         NA mascu… Aleen … Aleena 
   3 Wicket S…     88    20 brown   brown   brown         8 mascu… Endor   Ewok   
   4 Dud Bolt      94    45 none    blue, … yellow       NA mascu… Vulpter Vulpte…
   5 R2-D2         96    32 &lt;NA&gt;    white,… red          33 mascu… Naboo   Droid  
   6 R4-P17        96    NA none    silver… red, b…      NA femin… &lt;NA&gt;    Droid  
   7 R5-D4         97    32 &lt;NA&gt;    white,… red          NA mascu… Tatooi… Droid  
   8 Sebulba      112    40 none    grey, … orange       NA mascu… Malast… Dug    
   9 Gasgano      122    NA none    white,… black        NA mascu… Troiken Xexto  
  10 Watto        137    NA black   blue, … yellow       NA mascu… Toydar… Toydar…
  # … with 72 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 95% 7%
background-size: 6%

# Sort rows with `arrange()`

### ascending is the default--include `desc()` to sort descending

.code60[


```r
big_starwars |&gt; arrange(desc(height))
```

]

--

.code60[


```
  # A tibble: 82 × 18
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Yarael P…    264    NA none    white   yellow     NA   mascu… Quermia Quermi…
   2 Tarfful      234   136 brown   brown   blue       NA   mascu… Kashyy… Wookie 
   3 Lama Su      229    88 none    grey    black      NA   mascu… Kamino  Kamino…
   4 Chewbacca    228   112 brown   &lt;NA&gt;    blue      200   mascu… Kashyy… Wookie 
   5 Roos Tar…    224    82 none    grey    orange     NA   mascu… Naboo   Gungan 
   6 Grievous     216   159 none    brown,… green,…    NA   mascu… Kalee   Kaleesh
   7 Taun We      213    NA none    grey    black      NA   femin… Kamino  Kamino…
   8 Rugor Na…    206    NA none    green   orange     NA   mascu… Naboo   Gungan 
   9 Tion Med…    206    80 none    grey    black      NA   mascu… Utapau  Pau'an 
  10 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
  # … with 72 more rows, 8 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, and abbreviated variable names ¹​hair_color,
  #   ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]

---
class: inverse, center, middle
background-image: url(img/dplyr.png)
background-position: 50% 10%
background-size: 25%

&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;

# Creating columns with `mutate()`

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 6%

# Create columns with `mutate()`


.code60[


```r
big_starwars |&gt; 
      mutate(bmi = mass / ((height / 100)^2))
```

]

--

.code60[


```
  # A tibble: 82 × 19
     name      height  mass hair_…¹ skin_…² eye_c…³ birth…⁴ gender homew…⁵ species
     &lt;chr&gt;      &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;     &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;   &lt;chr&gt;  
   1 Luke Sky…    172    77 blond   fair    blue       19   mascu… Tatooi… Human  
   2 C-3PO        167    75 &lt;NA&gt;    gold    yellow    112   mascu… Tatooi… Droid  
   3 R2-D2         96    32 &lt;NA&gt;    white,… red        33   mascu… Naboo   Droid  
   4 Darth Va…    202   136 none    white   yellow     41.9 mascu… Tatooi… Human  
   5 Leia Org…    150    49 brown   light   brown      19   femin… Aldera… Human  
   6 Owen Lars    178   120 brown,… light   blue       52   mascu… Tatooi… Human  
   7 Beru Whi…    165    75 brown   light   blue       47   femin… Tatooi… Human  
   8 R5-D4         97    32 &lt;NA&gt;    white,… red        NA   mascu… Tatooi… Droid  
   9 Biggs Da…    183    84 black   light   brown      24   mascu… Tatooi… Human  
  10 Obi-Wan …    182    77 auburn… fair    blue-g…    57   mascu… Stewjon Human  
  # … with 72 more rows, 9 more variables: sex &lt;chr&gt;, species_class &lt;chr&gt;,
  #   species_desig &lt;chr&gt;, vehicle &lt;chr&gt;, hw_climate &lt;chr&gt;, hw_gravity &lt;chr&gt;,
  #   hw_terrain &lt;chr&gt;, hw_pop &lt;dbl&gt;, bmi &lt;dbl&gt;, and abbreviated variable names
  #   ¹​hair_color, ²​skin_color, ³​eye_color, ⁴​birth_year, ⁵​homeworld
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 6%

# Create columns with `mutate()`

*Where is our new column? Use `select()` to view `bmi`*

.code60[


```r
big_starwars |&gt;
        mutate(bmi = mass / ((height / 100)^2)) |&gt;
        select(bmi)
```

]

--

.code60[


```
  # A tibble: 82 × 1
       bmi
     &lt;dbl&gt;
   1  26.0
   2  26.9
   3  34.7
   4  33.3
   5  21.8
   6  37.9
   7  27.5
   8  34.0
   9  25.1
  10  23.2
  # … with 72 more rows
```

]


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 93% 7%
background-size: 6%

# Change existing columns with `mutate()` 

.code60[


```r
big_starwars |&gt;
      mutate(bmi = mass / ((height / 100)^2), # create bmi
             bmi = round(bmi, digits = 0)) |&gt; # change bmi
          select(bmi) # check bmi
```

]

--

.code60[


```
  # A tibble: 82 × 1
       bmi
     &lt;dbl&gt;
   1    26
   2    27
   3    35
   4    33
   5    22
   6    38
   7    28
   8    34
   9    25
  10    23
  # … with 72 more rows
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 97% 8%
background-size: 6%

# Creating pipelines of functions

### Review the code below and think about what each object contains:

1. Filter `big_starwars` to only brown-haired characters over 100 cm tall  
2. Create a `bmi` column using:  `mass / ((height / 100) ^ 2)`    
3. Select `name`, `bmi`, and `homeworld`   
4. Arrange the data by `bmi`, descending  

.code50[


```r
object_01 &lt;- filter(big_starwars, hair_color == "brown" &amp; height &gt; 100)
object_02 &lt;- mutate(object_01, bmi = mass / ((height / 100)^2))
object_03 &lt;- select(object_02, name, bmi, homeworld)
object_04 &lt;- arrange(object_03, desc(bmi))
```

]


---
class: left, top
background-image: url(img/dplyr.png)
background-position: 97% 8%
background-size: 6%

# Creating pipelines of functions

### Re-write these functions into a pipeline, ending with a single output (`new_big_starwars`)

1. Filter `big_starwars` to only brown-haired characters over 100 cm tall  
2. Create a `bmi` column using:  `mass / ((height / 100) ^ 2)`    
3. Select `name`, `bmi`, and `homeworld`   
4. Arrange the data by `bmi`, descending 

--

.code50[


```r
big_starwars %&gt;% 
  filter(hair_color == "_____" &amp; height &gt; ___) %&gt;% 
  mutate(___ = mass / ((height / 100) ^ 2)) %&gt;% 
  select(____, bmi, _________) %&gt;% 
  arrange(____(bmi)) -&gt; new_big_starwars
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 97% 8%
background-size: 6%

# Creating pipelines of functions

The answer is below:

.code50[


```r
big_starwars |&gt; 
  filter(hair_color == "brown" &amp; height &gt; 100) |&gt; 
  mutate(bmi = mass / ((height / 100)^2)) |&gt; 
  select(name, bmi, homeworld) |&gt; 
  arrange(desc(bmi)) -&gt; new_big_starwars
new_big_starwars
```

]



--

.code50[


```
  # A tibble: 14 × 3
     name                 bmi homeworld 
     &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;     
   1 Jek Tono Porkins    34.0 Bestine IV
   2 Beru Whitesun lars  27.5 Tatooine  
   3 Wedge Antilles      26.6 Corellia  
   4 Tarfful             24.8 Kashyyyk  
   5 Han Solo            24.7 Corellia  
   6 Qui-Gon Jinn        23.9 &lt;NA&gt;      
   7 Raymus Antilles     22.4 Alderaan  
   8 Leia Organa         21.8 Alderaan  
   9 Chewbacca           21.5 Kashyyyk  
  10 Padmé Amidala       13.1 Naboo     
  11 Ric Olié            NA   Naboo     
  12 Cordé               NA   Naboo     
  13 Cliegg Lars         NA   Tatooine  
  14 Dormé               NA   Naboo
```

]

---
class: left, top
background-image: url(img/dplyr.png)
background-position: 10% 95%
background-size: 6%

# Resources for Data Manipluation 

### 1. [R for Data Science](https://r4ds.had.co.nz/transform.html) 

### 2. [Data Wrangling with R](https://cengel.github.io/R-data-wrangling/) 

### 3. [Stack Overflow questions tagged with `dplyr`](https://stackoverflow.com/questions/tagged/dplyr)

### 4. [RStudio Community posts tagged `dplyr`](https://community.rstudio.com/tag/dplyr)



    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false,
"ratio": "16:9"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
